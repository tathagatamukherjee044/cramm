import{b as V}from"./chunk-XRDGZS6U.js";import{e as F,g as C,i as j}from"./chunk-RNLN5QFR.js";import"./chunk-LO7BOWZV.js";import{B as E,C as G,k as A,r as x,s as N,t as I,u as T,v as U,w as W}from"./chunk-VD7QXCPK.js";import{Ab as S,Bb as _,Cb as y,Ka as d,Pa as g,Va as v,Wa as k,Z as D,eb as f,ia as c,ja as p,mb as e,nb as i,ob as M,pb as b,rb as h,wb as w,xb as s}from"./chunk-BEKEJZ2R.js";var R=(()=>{let t=class t{constructor(n,o){this.authService=n,this.router=o,this.user={}}onSubmit(){console.log(this.user),this.authService.authenticateUser(this.user).subscribe(n=>{console.log(n),localStorage.setItem("accessToken",n.accessToken),localStorage.setItem("user",n),this.router.navigate(["/quiz"])})}goTo(n){console.log(n),this.router.navigate([n])}loginWithGoogle(){this.authService.getGoogleOAuthURL()}};t.\u0275fac=function(o){return new(o||t)(g(V),g(C))},t.\u0275cmp=v({type:t,selectors:[["app-login"]],decls:26,vars:4,consts:[["loginForm","ngForm"],["email","ngModel"],["password","ngModel"],[1,"centerHorizontal","centreVetical",2,"display","flex","flex-direction","column","max-width","300px",3,"ngSubmit"],["type","text","name","email",1,"customInput",3,"ngModelChange","ngModel"],[3,"hidden"],["type","text","name","password",1,"customInput",3,"ngModelChange","ngModel"],[1,"customInput","margin1UnitVertical","actionButton"],[1,"centerHorizontal",2,"display","flex","flex-direction","column"],[1,"centerHorizontal"],[1,"centerHorizontal",2,"max-width","300px"],[1,"customInput",2,"justify-content","center",3,"click"],["src","../../../assets/icon/googleLogoG.png",2,"width","20px","height","20px"],["href","",1,"centerHorizontal",3,"click"]],template:function(o,r){if(o&1){let l=b();e(0,"form",3,0),h("ngSubmit",function(){return c(l),p(r.onSubmit())}),e(2,"label"),s(3,"E-mail"),i(),e(4,"input",4,1),y("ngModelChange",function(a){return c(l),_(r.user.email,a)||(r.user.email=a),p(a)}),i(),e(6,"span",5),s(7," Error "),i(),e(8,"label"),s(9,"Password"),i(),e(10,"input",6,2),y("ngModelChange",function(a){return c(l),_(r.user.password,a)||(r.user.password=a),p(a)}),i(),e(12,"span",5),s(13," Error "),i(),e(14,"button",7),s(15,"Login"),i()(),e(16,"div",8)(17,"p",9),s(18,"-- Or Login with --"),i(),e(19,"div",10)(20,"button",11),h("click",function(){return c(l),p(r.loginWithGoogle())}),M(21,"img",12),s(22," \xA0\xA0Google "),i()(),M(23,"br"),e(24,"a",13),h("click",function(a){return c(l),r.goTo("/auth/signup"),p(a.preventDefault())}),s(25,"Register new account"),i()()}if(o&2){let l=w(5),u=w(11);d(4),S("ngModel",r.user.email),d(2),f("hidden",l.valid),d(4),S("ngModel",r.user.password),d(2),f("hidden",u.valid)}},dependencies:[E,W,x,N,I,U,T],encapsulation:2});let m=t;return m})();var P=(()=>{let t=class t{constructor(n,o){this.authService=n,this.router=o,this.newUser={}}onSubmit(){console.log(this.newUser),console.log(this.newUser),this.authService.createUser(this.newUser).subscribe(n=>{console.log(n)})}goTo(n){this.router.navigate([n])}loginWithGoogle(){this.authService.getGoogleOAuthURL()}};t.\u0275fac=function(o){return new(o||t)(g(V),g(C))},t.\u0275cmp=v({type:t,selectors:[["app-signup"]],decls:32,vars:6,consts:[["loginForm","ngForm"],["userName","ngModel"],["email","ngModel"],["password","ngModel"],[1,"centerHorizontal","centreVetical",2,"display","flex","flex-direction","column","max-width","300px",3,"ngSubmit"],[2,"justify-content","left"],["type","text","name","userName",1,"customInput",3,"ngModelChange","ngModel"],[3,"hidden"],["type","text","name","email",1,"customInput",3,"ngModelChange","ngModel"],["type","text","name","password",1,"customInput",3,"ngModelChange","ngModel"],[1,"customInput","margin1UnitVertical","actionButton"],[1,"centerHorizontal",2,"display","flex","flex-direction","column"],[1,"centerHorizontal"],[1,"centerHorizontal",2,"max-width","300px"],[1,"customInput",2,"justify-content","center",3,"click"],["src","../../../assets/icon/googleLogoG.png",2,"width","20px","height","20px"],["href","",1,"centerHorizontal",3,"click"]],template:function(o,r){if(o&1){let l=b();e(0,"form",4,0),h("ngSubmit",function(){return c(l),p(r.onSubmit())}),e(2,"label",5),s(3,"Name"),i(),e(4,"input",6,1),y("ngModelChange",function(a){return c(l),_(r.newUser.userName,a)||(r.newUser.userName=a),p(a)}),i(),e(6,"span",7),s(7," Error "),i(),e(8,"label"),s(9,"E-mail"),i(),e(10,"input",8,2),y("ngModelChange",function(a){return c(l),_(r.newUser.email,a)||(r.newUser.email=a),p(a)}),i(),e(12,"span",7),s(13," Error "),i(),e(14,"label"),s(15,"Password"),i(),e(16,"input",9,3),y("ngModelChange",function(a){return c(l),_(r.newUser.password,a)||(r.newUser.password=a),p(a)}),i(),e(18,"span",7),s(19," Error "),i(),e(20,"button",10),s(21,"Signup"),i()(),e(22,"div",11)(23,"p",12),s(24,"-- Or Login with --"),i(),e(25,"div",13)(26,"button",14),h("click",function(){return c(l),p(r.loginWithGoogle())}),M(27,"img",15),s(28," \xA0\xA0Google "),i()(),M(29,"br"),e(30,"a",16),h("click",function(a){return c(l),r.goTo("/auth/login"),p(a.preventDefault())}),s(31,"Already have an account?"),i()()}if(o&2){let l=w(5),u=w(11),a=w(17);d(4),S("ngModel",r.newUser.userName),d(2),f("hidden",l.valid),d(4),S("ngModel",r.newUser.email),d(2),f("hidden",u.valid),d(4),S("ngModel",r.newUser.password),d(2),f("hidden",a.valid)}},dependencies:[E,W,x,N,I,U,T],encapsulation:2});let m=t;return m})();var B=(()=>{let t=class t{constructor(n,o,r){this.route=n,this.router=o,this.authService=r,this.userDataEncoded=null}ngOnInit(){this.route.queryParams.subscribe(n=>{if(n.data){this.userDataEncoded=n.data;let o=JSON.parse(atob(this.userDataEncoded));o.loggedIn=!0,console.log(o),this.authService.setUserSensitiveData(o),this.router.navigate(["/learn"])}}),console.log()}};t.\u0275fac=function(o){return new(o||t)(g(F),g(C),g(V))},t.\u0275cmp=v({type:t,selectors:[["app-oauth"]],decls:2,vars:0,template:function(o,r){o&1&&(e(0,"p"),s(1,"Authentication in progress"),i())},encapsulation:2});let m=t;return m})();var q=[{path:"signup",component:P},{path:"login",component:R},{path:"oauth",component:B}],oe=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=k({type:t}),t.\u0275inj=D({imports:[A,E,j.forChild(q),G]});let m=t;return m})();export{oe as LoginModule};
